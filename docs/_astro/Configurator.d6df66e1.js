import{h as G,p as V,T as se}from"./hooks.module.e6e2c3cf.js";import{l as X}from"./preact.module.995ee422.js";function le(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var j={exports:{}},z={exports:{}};(function(o,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=f;function c(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?c=function(s){return typeof s}:c=function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},c(i)}function f(i){var n=typeof i=="string"||i instanceof String;if(!n){var s=c(i);throw i===null?s="null":s==="object"&&(s=i.constructor.name),new TypeError("Expected a string but received a ".concat(s))}}o.exports=r.default,o.exports.default=r.default})(z,z.exports);var Z=z.exports,H={exports:{}},B={exports:{}};(function(o,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=c;function c(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;for(var n in i)typeof f[n]>"u"&&(f[n]=i[n]);return f}o.exports=r.default,o.exports.default=r.default})(B,B.exports);var J=B.exports;(function(o,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=s;var c=i(Z),f=i(J);function i(e){return e&&e.__esModule?e:{default:e}}var n={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};function s(e,h){(0,c.default)(e),h=(0,f.default)(h,n),h.allow_trailing_dot&&e[e.length-1]==="."&&(e=e.substring(0,e.length-1)),h.allow_wildcard===!0&&e.indexOf("*.")===0&&(e=e.substring(2));var v=e.split("."),u=v[v.length-1];return h.require_tld&&(v.length<2||!h.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(u)||/\s/.test(u))||!h.allow_numeric_tld&&/^\d+$/.test(u)?!1:v.every(function(d){return!(d.length>63&&!h.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(d)||/[\uff01-\uff5e]/.test(d)||/^-|-$/.test(d)||!h.allow_underscores&&/_/.test(d))})}o.exports=r.default,o.exports.default=r.default})(H,H.exports);var ce=H.exports,Q={exports:{}};(function(o,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=v;var c=f(Z);function f(u){return u&&u.__esModule?u:{default:u}}var i="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",n="(".concat(i,"[.]){3}").concat(i),s=new RegExp("^".concat(n,"$")),e="(?:[0-9a-fA-F]{1,4})",h=new RegExp("^("+"(?:".concat(e,":){7}(?:").concat(e,"|:)|")+"(?:".concat(e,":){6}(?:").concat(n,"|:").concat(e,"|:)|")+"(?:".concat(e,":){5}(?::").concat(n,"|(:").concat(e,"){1,2}|:)|")+"(?:".concat(e,":){4}(?:(:").concat(e,"){0,1}:").concat(n,"|(:").concat(e,"){1,3}|:)|")+"(?:".concat(e,":){3}(?:(:").concat(e,"){0,2}:").concat(n,"|(:").concat(e,"){1,4}|:)|")+"(?:".concat(e,":){2}(?:(:").concat(e,"){0,3}:").concat(n,"|(:").concat(e,"){1,5}|:)|")+"(?:".concat(e,":){1}(?:(:").concat(e,"){0,4}:").concat(n,"|(:").concat(e,"){1,6}|:)|")+"(?::((?::".concat(e,"){0,5}:").concat(n,"|(?::").concat(e,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");function v(u){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(0,c.default)(u),d=String(d),d?d==="4"?s.test(u):d==="6"?h.test(u):!1:v(u,4)||v(u,6)}o.exports=r.default,o.exports.default=r.default})(Q,Q.exports);var oe=Q.exports;(function(o,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=te;var c=s(Z),f=s(ce),i=s(oe),n=s(J);function s(t){return t&&t.__esModule?t:{default:t}}function e(t,l){return C(t)||d(t,l)||v(t,l)||h()}function h(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v(t,l){if(t){if(typeof t=="string")return u(t,l);var p=Object.prototype.toString.call(t).slice(8,-1);if(p==="Object"&&t.constructor&&(p=t.constructor.name),p==="Map"||p==="Set")return Array.from(t);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return u(t,l)}}function u(t,l){(l==null||l>t.length)&&(l=t.length);for(var p=0,m=new Array(l);p<l;p++)m[p]=t[p];return m}function d(t,l){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var p=[],m=!0,y=!1,A=void 0;try{for(var N=t[Symbol.iterator](),b;!(m=(b=N.next()).done)&&(p.push(b.value),!(l&&p.length===l));m=!0);}catch(_){y=!0,A=_}finally{try{!m&&N.return!=null&&N.return()}finally{if(y)throw A}}return p}}function C(t){if(Array.isArray(t))return t}var U={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!0,allow_query_components:!0,validate_length:!0},K=/^\[([^\]]+)\](?::([0-9]+))?$/;function ee(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function Y(t,l){for(var p=0;p<l.length;p++){var m=l[p];if(t===m||ee(m)&&m.test(t))return!0}return!1}function te(t,l){if((0,c.default)(t),!t||/[\s<>]/.test(t)||t.indexOf("mailto:")===0||(l=(0,n.default)(l,U),l.validate_length&&t.length>=2083)||!l.allow_fragments&&t.includes("#")||!l.allow_query_components&&(t.includes("?")||t.includes("&")))return!1;var p,m,y,A,N,b,_,k;if(_=t.split("#"),t=_.shift(),_=t.split("?"),t=_.shift(),_=t.split("://"),_.length>1){if(p=_.shift().toLowerCase(),l.require_valid_protocol&&l.protocols.indexOf(p)===-1)return!1}else{if(l.require_protocol)return!1;if(t.slice(0,2)==="//"){if(!l.allow_protocol_relative_urls)return!1;_[0]=t.slice(2)}}if(t=_.join("://"),t==="")return!1;if(_=t.split("/"),t=_.shift(),t===""&&!l.require_host)return!0;if(_=t.split("@"),_.length>1){if(l.disallow_auth||_[0]===""||(m=_.shift(),m.indexOf(":")>=0&&m.split(":").length>2))return!1;var re=m.split(":"),W=e(re,2),ne=W[0],ae=W[1];if(ne===""&&ae==="")return!1}A=_.join("@"),b=null,k=null;var M=A.match(K);if(M?(y="",k=M[1],b=M[2]||null):(_=A.split(":"),y=_.shift(),_.length&&(b=_.join(":"))),b!==null&&b.length>0){if(N=parseInt(b,10),!/^[0-9]+$/.test(b)||N<=0||N>65535)return!1}else if(l.require_port)return!1;return l.host_whitelist?Y(y,l.host_whitelist):y===""&&!l.require_host?!0:!(!(0,i.default)(y)&&!(0,f.default)(y,l)&&(!k||!(0,i.default)(k,6))||(y=y||k,l.host_blacklist&&Y(y,l.host_blacklist)))}o.exports=r.default,o.exports.default=r.default})(j,j.exports);var ie=j.exports;const ue=le(ie);function fe(){const[o,r]=G({});return V(()=>{speechSynthesis.addEventListener("voiceschanged",()=>{const c={};speechSynthesis.getVoices().forEach(f=>{const{lang:i}=f;i.length===5&&(c[i]?c[i]+=1:c[i]=1)}),r(c)})},[]),o}let de=class{constructor(){this.voices={},speechSynthesis.addEventListener("voiceschanged",()=>{speechSynthesis.getVoices().forEach(r=>{const{lang:c}=r;c.length===5&&(this.voices[c]?this.voices[c]+=1:this.voices[c]=1)})})}speak(r,c,f){const i=new SpeechSynthesisUtterance(r);i.voice=this.voices[c]?f<this.voices[c]?speechSynthesis.getVoices().filter(n=>n.lang===c)[f-1]:speechSynthesis.getVoices().filter(n=>n.lang===c)[0]:speechSynthesis.getVoices()[0],speechSynthesis.speak(i)}};const he=new de;var pe=0;function a(o,r,c,f,i,n){var s,e,h={};for(e in r)e=="ref"?s=r[e]:h[e]=r[e];var v={type:o,props:h,key:c,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--pe,__source:i,__self:n};if(typeof o=="function"&&(s=o.defaultProps))for(e in s)h[e]===void 0&&(h[e]=s[e]);return X.vnode&&X.vnode(v),v}const F="channel",I="default_avatar",T="style",O="tts",w="tts_accent",$="tts_index",L="render",R="bots",P="pato_bot",q="htmli",D="_valid",S="m-1",x="mr-2",E="bg-zinc-950 text-zinc-100 border-b-2 border-zinc-300 focus:border-amber-300 transition-all",g={};g[F]="chrisvdev";g[I]="";g[`${I}${D}`]=!0;g[T]="";g[`${T}${D}`]=!0;g[O]=!0;g[w]="";g[$]="";g[L]=!0;g[R]="";g[P]=!0;g[q]=!1;const _e=[F,R],ve=[R],me=[O,L,P,q],ge=[I,T];function xe(){const o=fe();V(()=>{console.log(Object.keys(o).reduce((n,s)=>`${n} ${s}`,""))},[o]);const[r,c]=G(structuredClone(g)),f=se(n=>{const s=/^[A-Za-z0-9_]*$/,e=/^[A-Za-z0-9_,]*$/,h=(u,d)=>{c(C=>{const U={...C};return U[d||n]=u,U})},v=()=>{c(u=>structuredClone(u))};return _e.includes(n)?u=>{const{value:d}=u.currentTarget;(ve.includes(n)?e.test(d):s.test(d))?h(d):v()}:me.includes(n)?u=>{const{checked:d}=u.currentTarget;typeof d=="boolean"?h(d):v()}:ge.includes(n)?u=>{const{value:d}=u.currentTarget;h(d),h(d===""||ue(d),`${n}${D}`)}:u=>{const{value:d}=u.currentTarget;h(d)}},[]);V(()=>{const n=()=>{c(s=>{const e={...s};return e[w]=speechSynthesis.getVoices()[0].lang,e[$]=1,e})};return speechSynthesis.addEventListener("voiceschanged",n),()=>{speechSynthesis.removeEventListener("voiceschanged",n)}},[]);const i=n=>{const s=[];for(let e=1;e<=n;e++)s.push(a("option",{children:e}));return s};return a("section",{className:"mx-auto max-w-md",children:a("form",{children:[a("div",{className:S,children:[a("label",{className:x,children:"Channel"}),a("input",{className:E,value:r[F],type:"text",name:F,onInput:f(F)})]}),a("div",{className:S,children:[a("label",{className:x,children:"Custom CSS Style"}),a("input",{className:E,value:r[T],type:"text",name:T,onInput:f(T)})]}),r[`${T}${D}`]||a("p",{children:"Is not a valid URL"}),a("div",{className:S,children:[a("label",{className:x,children:"Default Avatar"}),a("input",{className:E,value:r[I],type:"text",name:I,onInput:f(I)})]}),r[`${I}${D}`]||a("p",{children:"Is not a valid URL"}),a("div",{className:S,children:[a("label",{className:x,children:"TTS"}),a("input",{checked:r[O],type:"checkbox",name:O,onInput:f(O)})]}),a("div",{className:S,children:[a("label",{className:x,children:"TTS Accent"}),a("select",{className:E,value:r[w],name:w,onInput:f(w),children:Object.keys(o).sort().map((n,s)=>a("option",{children:n},`voice_${s}`))})]}),a("div",{className:S,children:[a("label",{className:x,children:"Accent variant"}),a("select",{className:E,value:r[$],name:$,onInput:f($),children:r[w]!==""&&i(o[r[w]])})]}),a("button",{type:"button",onClick:n=>{n.preventDefault(),he.speak("Esto es una prueba",r[w],r[$])},children:"Test TTS"}),a("div",{className:S,children:[a("label",{className:x,children:"Render"}),a("input",{checked:r[L],type:"checkbox",name:L,onInput:f(L)})]}),a("div",{className:S,children:[a("label",{className:x,children:"Bots"}),a("input",{className:E,value:r[R],type:"text",name:R,onInput:f(R)}),a("p",{className:"font-mono text-xs m-1",children:'Usernames separated by "," like "bot1,bot2,etc"'})]}),a("div",{className:S,children:[a("label",{className:x,children:"PatoBot compatibility"}),a("input",{type:"checkbox",checked:r[P],name:P,onInput:f(P)}),a("p",{children:["(",a("a",{href:"https://elpatobot.com/",children:"You need to have the PatoBot configured."}),")"]})]}),a("div",{className:S,children:[a("label",{className:x,children:"HTML Injection"}),a("input",{type:"checkbox",checked:r[q],name:q,onInput:f(q)}),a("p",{children:"(Experimental, Use on your own risk)"})]})]})})}export{xe as default};
